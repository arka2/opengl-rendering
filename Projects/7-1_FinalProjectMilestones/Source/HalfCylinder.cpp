///////////////////////////////////////////////////////////////////////////////
// HalfCylinder.cpp
// ========
// create meshes for half cylinder primitive
//
//  AUTHOR: Brian Battersby - SNHU Instructor / Computer Science
//	EDITED BY Arka Tu
//	Created for CS-330-Computational Graphics and Visualization, Nov. 7th, 2022
///////////////////////////////////////////////////////////////////////////////

#include "HalfCylinder.h"

// GLM Math Header inclusions
#include <glm/glm.hpp>
#include <glm/gtx/transform.hpp>
#include <glm/gtc/type_ptr.hpp>

#include <vector>

namespace
{
	const double M_PI = 3.14159265358979323846f;
	const double M_PI_2 = 1.571428571428571;
	const GLuint g_FloatsPerVertex = 3;	// Number of coordinates per vertex
	const GLuint g_FloatsPerNormal = 3;	// Number of values per vertex color
	const GLuint g_FloatsPerUV = 2;		// Number of texture coordinate values
}

HalfCylinder::HalfCylinder()
{
	m_bMemoryLayoutDone = false;
}

///////////////////////////////////////////////////
//	LoadCylinderMesh()
//
//	Create a cylinder mesh by specifying the vertices and 
//  store it in a VAO/VBO.  The normals and texture
//  coordinates are also set.
//
//  Correct triangle drawing commands:
//
//	glDrawArrays(GL_TRIANGLE_FAN, 0, 36);		//bottom
//	glDrawArrays(GL_TRIANGLE_FAN, 36, 36);		//top
//	glDrawArrays(GL_TRIANGLE_STRIP, 72, 146);	//sides
///////////////////////////////////////////////////
void HalfCylinder::LoadCylinderMesh()
{
	GLfloat verts[] = {
		// cylinder bottom		// normals			// texture coords
		1.0f, 0.0f, 0.0f,		0.0f, -1.0f, 0.0f,	0.5f,1.0f,
		.98f, 0.0f, -0.17f,		0.0f, -1.0f, 0.0f,	0.41f, 0.983f,
		.94f, 0.0f, -0.34f,		0.0f, -1.0f, 0.0f,	0.33f, 0.96f,
		.87f, 0.0f, -0.5f,		0.0f, -1.0f, 0.0f,	0.25f, 0.92f,
		.77f, 0.0f, -0.64f,		0.0f, -1.0f, 0.0f,	0.17f, 0.87f,
		.64f, 0.0f, -0.77f,		0.0f, -1.0f, 0.0f,	0.13f, 0.83f,
		.5f, 0.0f, -0.87f,		0.0f, -1.0f, 0.0f,	0.08f, 0.77f,
		.34f, 0.0f, -0.94f,		0.0f, -1.0f, 0.0f,	0.04f, 0.68f,
		.17f, 0.0f, -0.98f,		0.0f, -1.0f, 0.0f,	0.017f, 0.6f,
		0.0f, 0.0f, -1.0f,		0.0f, -1.0f, 0.0f,	0.0f,0.5f,
		-.17f, 0.0f, -0.98f,	0.0f, -1.0f, 0.0f,	0.017f, 0.41f,
		-.34f, 0.0f, -0.94f,	0.0f, -1.0f, 0.0f,	0.04f, 0.33f,
		-.5f, 0.0f, -0.87f,		0.0f, -1.0f, 0.0f,	0.08f, 0.25f,
		-.64f, 0.0f, -0.77f,	0.0f, -1.0f, 0.0f,	0.13f, 0.17f,
		-.77f, 0.0f, -0.64f,	0.0f, -1.0f, 0.0f,	0.17f, 0.13f,
		-.87f, 0.0f, -0.5f,		0.0f, -1.0f, 0.0f,	0.25f, 0.08f,
		-.94f, 0.0f, -0.34f,	0.0f, -1.0f, 0.0f,	0.33f, 0.04f,
		-.98f, 0.0f, -0.17f,	0.0f, -1.0f, 0.0f,	0.41f, 0.017f,
		-1.0f, 0.0f, 0.0f,		0.0f, -1.0f, 0.0f,	0.5f, 0.0f,
		-.98f, 0.0f, 0.17f,		0.0f, -1.0f, 0.0f,	0.6f, 0.017f,
		-.94f, 0.0f, 0.34f,		0.0f, -1.0f, 0.0f,	0.68f, 0.04f,
		-.87f, 0.0f, 0.5f,		0.0f, -1.0f, 0.0f,	0.77f, 0.08f,
		-.77f, 0.0f, 0.64f,		0.0f, -1.0f, 0.0f,	0.83f, 0.13f,
		-.64f, 0.0f, 0.77f,		0.0f, -1.0f, 0.0f,	0.87f, 0.17f,
		-.5f, 0.0f, 0.87f,		0.0f, -1.0f, 0.0f,	0.92f, 0.25f,
		-.34f, 0.0f, 0.94f,		0.0f, -1.0f, 0.0f,	0.96f, 0.33f,
		-.17f, 0.0f, 0.98f,		0.0f, -1.0f, 0.0f,	0.983f, 0.41f,
		0.0f, 0.0f, 1.0f,		0.0f, -1.0f, 0.0f,	1.0f, 0.5f,
		.17f, 0.0f, 0.98f,		0.0f, -1.0f, 0.0f,	0.983f, 0.6f,
		.34f, 0.0f, 0.94f,		0.0f, -1.0f, 0.0f,	0.96f, 0.68f,
		.5f, 0.0f, 0.87f,		0.0f, -1.0f, 0.0f,	0.92f, 0.77f,
		.64f, 0.0f, 0.77f,		0.0f, -1.0f, 0.0f,	0.87f, 0.83f,
		.77f, 0.0f, 0.64f,		0.0f, -1.0f, 0.0f,	0.83f, 0.87f,
		.87f, 0.0f, 0.5f,		0.0f, -1.0f, 0.0f,	0.77f, 0.92f,
		.94f, 0.0f, 0.34f,		0.0f, -1.0f, 0.0f,	0.68f, 0.96f,
		.98f, 0.0f, 0.17f,		0.0f, -1.0f, 0.0f,	0.6f, 0.983f,

		// cylinder top			// normals			// texture coords
		1.0f, 1.0f, 0.0f,		0.0f, 1.0f, 0.0f,	0.5f,1.0f,
		.98f, 1.0f, -0.17f,		0.0f, 1.0f, 0.0f,	0.41f, 0.983f,
		.94f, 1.0f, -0.34f,		0.0f, 1.0f, 0.0f,	0.33f, 0.96f,
		.87f, 1.0f, -0.5f,		0.0f, 1.0f, 0.0f,	0.25f, 0.92f,
		.77f, 1.0f, -0.64f,		0.0f, 1.0f, 0.0f,	0.17f, 0.87f,
		.64f, 1.0f, -0.77f,		0.0f, 1.0f, 0.0f,	0.13f, 0.83f,
		.5f, 1.0f, -0.87f,		0.0f, 1.0f, 0.0f,	0.08f, 0.77f,
		.34f, 1.0f, -0.94f,		0.0f, 1.0f, 0.0f,	0.04f, 0.68f,
		.17f, 1.0f, -0.98f,		0.0f, 1.0f, 0.0f,	0.017f, 0.6f,
		0.0f, 1.0f, -1.0f,		0.0f, 1.0f, 0.0f,	0.0f,0.5f,
		-.17f, 1.0f, -0.98f,	0.0f, 1.0f, 0.0f,	0.017f, 0.41f,
		-.34f, 1.0f, -0.94f,	0.0f, 1.0f, 0.0f,	0.04f, 0.33f,
		-.5f, 1.0f, -0.87f,		0.0f, 1.0f, 0.0f,	0.08f, 0.25f,
		-.64f, 1.0f, -0.77f,	0.0f, 1.0f, 0.0f,	0.13f, 0.17f,
		-.77f, 1.0f, -0.64f,	0.0f, 1.0f, 0.0f,	0.17f, 0.13f,
		-.87f, 1.0f, -0.5f,		0.0f, 1.0f, 0.0f,	0.25f, 0.08f,
		-.94f, 1.0f, -0.34f,	0.0f, 1.0f, 0.0f,	0.33f, 0.04f,
		-.98f, 1.0f, -0.17f,	0.0f, 1.0f, 0.0f,	0.41f, 0.017f,
		-1.0f, 1.0f, 0.0f,		0.0f, 1.0f, 0.0f,	0.5f, 0.0f,
		-.98f, 1.0f, 0.17f,		0.0f, 1.0f, 0.0f,	0.6f, 0.017f,
		-.94f, 1.0f, 0.34f,		0.0f, 1.0f, 0.0f,	0.68f, 0.04f,
		-.87f, 1.0f, 0.5f,		0.0f, 1.0f, 0.0f,	0.77f, 0.08f,
		-.77f, 1.0f, 0.64f,		0.0f, 1.0f, 0.0f,	0.83f, 0.13f,
		-.64f, 1.0f, 0.77f,		0.0f, 1.0f, 0.0f,	0.87f, 0.17f,
		-.5f, 1.0f, 0.87f,		0.0f, 1.0f, 0.0f,	0.92f, 0.25f,
		-.34f, 1.0f, 0.94f,		0.0f, 1.0f, 0.0f,	0.96f, 0.33f,
		-.17f, 1.0f, 0.98f,		0.0f, 1.0f, 0.0f,	0.983f, 0.41f,
		0.0f, 1.0f, 1.0f,		0.0f, 1.0f, 0.0f,	1.0f, 0.5f,
		.17f, 1.0f, 0.98f,		0.0f, 1.0f, 0.0f,	0.983f, 0.6f,
		.34f, 1.0f, 0.94f,		0.0f, 1.0f, 0.0f,	0.96f, 0.68f,
		.5f, 1.0f, 0.87f,		0.0f, 1.0f, 0.0f,	0.92f, 0.77f,
		.64f, 1.0f, 0.77f,		0.0f, 1.0f, 0.0f,	0.87f, 0.83f,
		.77f, 1.0f, 0.64f,		0.0f, 1.0f, 0.0f,	0.83f, 0.87f,
		.87f, 1.0f, 0.5f,		0.0f, 1.0f, 0.0f,	0.77f, 0.92f,
		.94f, 1.0f, 0.34f,		0.0f, 1.0f, 0.0f,	0.68f, 0.96f,
		.98f, 1.0f, 0.17f,		0.0f, 1.0f, 0.0f,	0.6f, 0.983f,

		// cylinder body		// normals							// texture coords
		1.0f, 1.0f, 0.0f,		0.993150651f, 0.5f, -0.116841137f,	0.0,1.0,
		1.0f, 0.0f, 0.0f,		0.993150651f, 0.5f, -0.116841137f,	0.0,0.0,
		.98f, 0.0f, -0.17f,		0.993150651f, 0.5f, -0.116841137f,	0.0277,0.0,
		1.0f, 1.0f, 0.0f,		0.993150651f, 0.5f, -0.116841137f,	0.0,1.0,
		.98f, 1.0f, -0.17f,		0.973417103f, 0.5f, -0.229039446f,	0.0277,1.0,
		.98f, 0.0f, -0.17f,		0.973417103f, 0.5f, -0.229039446f,	0.0277,0.0,
		.94f, 0.0f, -0.34f,		0.973417103f, 0.0f, -0.229039446f,	0.0554,0.0,
		.98f, 1.0f, -0.17f,		0.973417103f, 0.0f, -0.229039446f,	0.0277,1.0,
		.94f, 1.0f, -0.34f,		0.916157305f, 0.0f, -0.400818795f,	0.0554,1.0,
		.94f, 0.0f, -0.34f,		0.916157305f, 0.0f, -0.400818795f,	0.0554,0.0,
		.87f, 0.0f, -0.5f,		0.916157305f, 0.0f, -0.400818795f,	0.0831,0.0,
		.94f, 1.0f, -0.34f,		0.916157305f, 0.0f, -0.400818795f,	0.0554,1.0,
		.87f, 1.0f, -0.5f,		0.813733339f, 0.0f, -0.581238329f,	0.0831,1.0,
		.87f, 0.0f, -0.5f,		0.813733339f, 0.0f, -0.581238329f,	0.0831,0.0,
		.77f, 0.0f, -0.64f,		0.813733339f, 0.0f, -0.581238329f,	0.1108,0.0,
		.87f, 1.0f, -0.5f,		0.813733339f, 0.0f, -0.581238329f,	0.0831,1.0,
		.77f, 1.0f, -0.64f,		0.707106769f, 0.0f, -0.707106769f,	0.1108,1.0,
		.77f, 0.0f, -0.64f,		0.707106769f, 0.0f, -0.707106769f,	0.1108,0.0,
		.64f, 0.0f, -0.77f,		0.707106769f, 0.0f, -0.707106769f,	0.1385,0.0,
		.77f, 1.0f, -0.64f,		0.707106769f, 0.0f, -0.707106769f,	0.1108,1.0,
		.64f, 1.0f, -0.77f,		0.581238329f, 0.0f, -0.813733339f,	0.1385,1.0,
		.64f, 0.0f, -0.77f,		0.581238329f, 0.0f, -0.813733339f,	0.1385,0.0,
		.5f, 0.0f, -0.87f,		0.581238329f, 0.0f, -0.813733339f,	0.1662,0.0,
		.64f, 1.0f, -0.77f,		0.581238329f, 0.0f, -0.813733339f,	0.1385, 1.0,
		.5f, 1.0f, -0.87f,		0.400818795f, 0.0f, -0.916157305f,	0.1662, 1.0,
		.5f, 0.0f, -0.87f,		0.400818795f, 0.0f, -0.916157305f,	0.1662, 0.0,
		.34f, 0.0f, -0.94f,		0.400818795f, 0.0f, -0.916157305f,	0.1939, 0.0,
		.5f, 1.0f, -0.87f,		0.400818795f, 0.0f, -0.916157305f,	0.1662, 1.0,
		.34f, 1.0f, -0.94f,		0.229039446f, 0.0f, -0.973417103f,	0.1939, 1.0,
		.34f, 0.0f, -0.94f,		0.229039446f, 0.0f, -0.973417103f,	0.1939, 0.0,
		.17f, 0.0f, -0.98f,		0.229039446f, 0.0f, -0.973417103f,	0.2216, 0.0,
		.34f, 1.0f, -0.94f,		0.229039446f, 0.0f, -0.973417103f,	0.1939, 1.0,
		.17f, 1.0f, -0.98f,		0.116841137f, 0.0f, -0.993150651f,	0.2216, 1.0,
		.17f, 0.0f, -0.98f,		0.116841137f, 0.0f, -0.993150651f,	0.2216, 0.0,
		0.0f, 0.0f, -1.0f,		0.116841137f, 0.0f, -0.993150651f,	0.2493, 0.0,
		.17f, 1.0f, -0.98f,		0.116841137f, 0.0f, -0.993150651f,	0.2216, 1.0,
		0.0f, 1.0f, -1.0f,		0.116841137f, 0.0f, -0.993150651f,	0.2493, 1.0,
		0.0f, 0.0f, -1.0f,		0.116841137f, 0.0f, -0.993150651f,	0.2493, 0.0,
		-.17f, 0.0f, -0.98f,	-0.116841137f, 0.0f, -0.993150651f,	0.277, 0.0,
		0.0f, 1.0f, -1.0f,		-0.116841137f, 0.0f, -0.993150651f,	0.2493, 1.0,
		-.17f, 1.0f, -0.98f,	-0.229039446f, 0.0f, -0.973417103f,	0.277, 1.0,
		-.17f, 0.0f, -0.98f,	-0.229039446f, 0.0f, -0.973417103f,	0.277, 0.0,
		-.34f, 0.0f, -0.94f,	-0.229039446f, 0.0f, -0.973417103f,	0.3047, 0.0,
		-.17f, 1.0f, -0.98f,	-0.229039446f, 0.0f, -0.973417103f,	0.277, 1.0,
		-.34f, 1.0f, -0.94f,	-0.400818795f, 0.0f, -0.916157305f,	0.3047, 1.0,
		-.34f, 0.0f, -0.94f,	-0.400818795f, 0.0f, -0.916157305f,	0.3047, 0.0,
		-.5f, 0.0f, -0.87f,		-0.400818795f, 0.0f, -0.916157305f,	0.3324, 0.0,
		-.34f, 1.0f, -0.94f,	-0.400818795f, 0.0f, -0.916157305f,	0.3047, 1.0,
		-.5f, 1.0f, -0.87f,		-0.581238329f, 0.0f, -0.813733339f,	0.3324, 1.0,
		-.5f, 0.0f, -0.87f,		-0.581238329f, 0.0f, -0.813733339f,	0.3324, 0.0,
		-.64f, 0.0f, -0.77f,	-0.581238329f, 0.0f, -0.813733339f,	0.3601, 0.0,
		-.5f, 1.0f, -0.87f,		-0.581238329f, 0.0f, -0.813733339f,	0.3324, 1.0,
		-.64f, 1.0f, -0.77f,	-0.707106769f, 0.0f, -0.707106769f,	0.3601, 1.0,
		-.64f, 0.0f, -0.77f,	-0.707106769f, 0.0f, -0.707106769f,	0.3601, 0.0,
		-.77f, 0.0f, -0.64f,	-0.707106769f, 0.0f, -0.707106769f,	0.3878, 0.0,
		-.64f, 1.0f, -0.77f,	-0.707106769f, 0.0f, -0.707106769f,	0.3601, 1.0,
		-.77f, 1.0f, -0.64f,	-0.813733339f, 0.0f, -0.581238329f,	0.3878, 1.0,
		-.77f, 0.0f, -0.64f,	-0.813733339f, 0.0f, -0.581238329f,	0.3878, 0.0,
		-.87f, 0.0f, -0.5f,		-0.813733339f, 0.0f, -0.581238329f,	0.4155, 0.0,
		-.77f, 1.0f, -0.64f,	-0.813733339f, 0.0f, -0.581238329f,	0.3878, 1.0,
		-.87f, 1.0f, -0.5f,		-0.916157305f, 0.0f, -0.400818795f,	0.4155, 1.0,
		-.87f, 0.0f, -0.5f,		-0.916157305f, 0.0f, -0.400818795f,	0.4155, 0.0,
		-.94f, 0.0f, -0.34f,	-0.916157305f, 0.0f, -0.400818795f,	0.4432, 0.0,
		-.87f, 1.0f, -0.5f,		-0.916157305f, 0.0f, -0.400818795f,	0.4155, 1.0,
		-.94f, 1.0f, -0.34f,	-0.973417103f, 0.0f, -0.229039446f,	0.4432, 1.0,
		-.94f, 0.0f, -0.34f,	-0.973417103f, 0.0f, -0.229039446f,	0.4432, 0.0,
		-.98f, 0.0f, -0.17f,	-0.973417103f, 0.0f, -0.229039446f,	0.4709, 0.0,
		-.94f, 1.0f, -0.34f,	-0.973417103f, 0.0f, -0.229039446f,	0.4432, 1.0,
		-.98f, 1.0f, -0.17f,	-0.993150651f, 0.0f, -0.116841137f,	0.4709, 1.0,
		-.98f, 0.0f, -0.17f,	-0.993150651f, 0.0f, -0.116841137f,	0.4709, 0.0,
		-1.0f, 0.0f, 0.0f,		-0.993150651f, 0.0f, -0.116841137f,	0.4986, 0.0,
		-.98f, 1.0f, -0.17f,	-0.993150651f, 0.0f, -0.116841137f,	0.4709, 1.0,
		-1.0f, 1.0f, 0.0f,		-0.993150651f, 0.0f, -0.116841137f,	0.4986, 1.0,
		-1.0f, 0.0f, 0.0f,		-0.993150651f, 0.0f, -0.116841137f,	0.4986, 0.0,
		-.98f, 0.0f, 0.17f,		-0.993150651f, 0.0f, 0.116841137f,	0.5263, 0.0,
		-1.0f, 1.0f, 0.0f,		-0.993150651f, 0.0f, 0.116841137f,	0.4986, 1.0,
		-.98f, 1.0f, 0.17f,		-0.973417103f, 0.0f, 0.229039446f,	0.5263, 1.0,
		-.98f, 0.0f, 0.17f,		-0.973417103f, 0.0f, 0.229039446f,	0.5263, 0.0,
		-.94f, 0.0f, 0.34f,		-0.973417103f, 0.0f, 0.229039446f,	0.554, 0.0,
		-.98f, 1.0f, 0.17f,		-0.973417103f, 0.0f, 0.229039446f,	0.5263, 1.0,
		-.94f, 1.0f, 0.34f,		-0.916157305f, 0.0f, 0.400818795f,	0.554, 1.0,
		-.94f, 0.0f, 0.34f,		-0.916157305f, 0.0f, 0.400818795f,	0.554, 0.0,
		-.87f, 0.0f, 0.5f,		-0.916157305f, 0.0f, 0.400818795f,	0.5817, 0.0,
		-.94f, 1.0f, 0.34f,		-0.916157305f, 0.0f, 0.400818795f,	0.554, 1.0,
		-.87f, 1.0f, 0.5f,		-0.813733339f, 0.0f, 0.581238329f,	0.5817, 1.0,
		-.87f, 0.0f, 0.5f,		-0.813733339f, 0.0f, 0.581238329f,	0.5817, 0.0,
		-.77f, 0.0f, 0.64f,		-0.813733339f, 0.0f, 0.581238329f,	0.6094, 0.0,
		-.87f, 1.0f, 0.5f,		-0.813733339f, 0.0f, 0.581238329f,	0.5817, 1.0,
		-.77f, 1.0f, 0.64f,		-0.707106769f, 0.0f, 0.707106769f,	0.6094, 1.0,
		-.77f, 0.0f, 0.64f,		-0.707106769f, 0.0f, 0.707106769f,	0.6094, 0.0,
		-.64f, 0.0f, 0.77f,		-0.707106769f, 0.0f, 0.707106769f,	0.6371, 0.0,
		-.77f, 1.0f, 0.64f,		-0.707106769f, 0.0f, 0.707106769f,	0.6094, 1.0,
		-.64f, 1.0f, 0.77f,		-0.581238329f, 0.0f, 0.813733339f,	0.6371, 1.0,
		-.64f, 0.0f, 0.77f,		-0.581238329f, 0.0f, 0.813733339f,	0.6371, 0.0,
		-.5f, 0.0f, 0.87f,		-0.581238329f, 0.0f, 0.813733339f,	0.6648, 0.0,
		-.64f, 1.0f, 0.77f,		-0.581238329f, 0.0f, 0.813733339f,	0.6371, 1.0,
		-.5f, 1.0f, 0.87f,		-0.400818795f, 0.0f, 0.916157305f,	0.6648, 1.0,
		-.5f, 0.0f, 0.87f,		-0.400818795f, 0.0f, 0.916157305f,	0.6648, 0.0,
		-.34f, 0.0f, 0.94f,		-0.400818795f, 0.0f, 0.916157305f,	0.6925, 0.0,
		-.5f, 1.0f, 0.87f,		-0.400818795f, 0.0f, 0.916157305f,	0.6648, 1.0,
		-.34f, 1.0f, 0.94f,		-0.229039446f, 0.0f, 0.973417103f,	0.6925, 1.0,
		-.34f, 0.0f, 0.94f,		-0.229039446f, 0.0f, 0.973417103f,	0.6925, 0.0,
		-.17f, 0.0f, 0.98f,		-0.229039446f, 0.0f, 0.973417103f,	0.7202, 0.0,
		-.34f, 1.0f, 0.94f,		-0.229039446f, 0.0f, 0.973417103f,	0.6925, 1.0,
		-.17f, 1.0f, 0.98f,		-0.116841137f, 0.0f, 0.993150651f,	0.7202, 1.0,
		-.17f, 0.0f, 0.98f,		-0.116841137f, 0.0f, 0.993150651f,	0.7202, 0.0,
		0.0f, 0.0f, 1.0f,		0.116841137f, 0.0f, 0.993150651f,	0.7479, 0.0,
		-.17f, 1.0f, 0.98f,		-0.116841137f, 0.0f, 0.993150651f,	0.7202, 1.0,
		0.0f, 1.0f, 1.0f,		0.116841137f, 0.0f, 0.993150651f,	0.7479, 1.0,
		0.0f, 0.0f, 1.0f,		0.116841137f, 0.0f, 0.993150651f,	0.7479, 0.0,
		.17f, 0.0f, 0.98f,		0.116841137f, 0.0f, 0.993150651f,	0.7756, 0.0,
		0.0f, 1.0f, 1.0f,		0.116841137f, 0.0f, 0.993150651f,	0.7479, 1.0,
		.17f, 1.0f, 0.98f,		0.229039446f, 0.0f, 0.973417103f,	0.7756, 1.0,
		.17f, 0.0f, 0.98f,		0.229039446f, 0.0f, 0.973417103f,	0.7756, 0.0,
		.34f, 0.0f, 0.94f,		0.229039446f, 0.0f, 0.973417103f,	0.8033, 0.0,
		.17f, 1.0f, 0.98f,		0.229039446f, 0.0f, 0.973417103f,	0.7756, 1.0,
		.34f, 1.0f, 0.94f,		0.400818795f, 0.0f, 0.916157305f,	0.8033, 1.0,
		.34f, 0.0f, 0.94f,		0.400818795f, 0.0f, 0.916157305f,	0.8033, 0.0,
		.5f, 0.0f, 0.87f,		0.400818795f, 0.0f, 0.916157305f,	0.831, 0.0,
		.34f, 1.0f, 0.94f,		0.400818795f, 0.0f, 0.916157305f,	0.8033, 1.0,
		.5f, 1.0f, 0.87f,		0.581238329f, 0.0f, 0.813733339f,	0.831, 1.0,
		.5f, 0.0f, 0.87f,		0.581238329f, 0.0f, 0.813733339f,	0.831, 0.0,
		.64f, 0.0f, 0.77f,		0.581238329f, 0.0f, 0.813733339f,	0.8587, 0.0,
		.5f, 1.0f, 0.87f,		0.581238329f, 0.0f, 0.813733339f,	0.831, 1.0,
		.64f, 1.0f, 0.77f,		0.707106769f, 0.0f, 0.707106769f,	0.8587, 1.0,
		.64f, 0.0f, 0.77f,		0.707106769f, 0.0f, 0.707106769f,	0.8587, 0.0,
		.77f, 0.0f, 0.64f,		0.707106769f, 0.0f, 0.707106769f,	0.8864, 0.0,
		.64f, 1.0f, 0.77f,		0.707106769f, 0.0f, 0.707106769f,	0.8587, 1.0,
		.77f, 1.0f, 0.64f,		0.813733339f, 0.0f, 0.581238329f,	0.8864, 1.0,
		.77f, 0.0f, 0.64f,		0.813733339f, 0.0f, 0.581238329f,	0.8864, 0.0,
		.87f, 0.0f, 0.5f,		0.813733339f, 0.0f, 0.581238329f,	0.9141, 0.0,
		.77f, 1.0f, 0.64f,		0.813733339f, 0.0f, 0.581238329f,	0.8864, 1.0,
		.87f, 1.0f, 0.5f,		0.916157305f, 0.0f, 0.400818795f,	0.9141, 1.0,
		.87f, 0.0f, 0.5f,		0.916157305f, 0.0f, 0.400818795f,	0.9141, 0.0,
		.94f, 0.0f, 0.34f,		0.916157305f, 0.0f, 0.400818795f,	0.9418, 0.0,
		.87f, 1.0f, 0.5f,		0.916157305f, 0.0f, 0.400818795f,	0.9141, 1.0,
		.94f, 1.0f, 0.34f,		0.973417103f, 0.0f, 0.229039446f,	0.9418, 1.0,
		.94f, 0.0f, 0.34f,		0.973417103f, 0.0f, 0.229039446f,	0.9418, 0.0,
		.98f, 0.0f, 0.17f,		0.973417103f, 0.0f, 0.229039446f,	0.9695, 0.0,
		.94f, 1.0f, 0.34f,		0.973417103f, 0.0f, 0.229039446f,	0.9418, 1.0,
		.98f, 1.0f, 0.17f,		0.993150651f, 0.0f, 0.116841137f,	0.9695, 1.0,
		.98f, 0.0f, 0.17f,		0.993150651f, 0.0f, 0.116841137f,	0.9695, 0.0,
		1.0f, 0.0f, 0.0f,		0.993150651f, 0.0f, 0.116841137f,	1.0, 0.0,
		.98f, 1.0f, 0.17f,		0.993150651f, 0.0f, 0.116841137f,	0.9695, 1.0,
		1.0f, 1.0f, 0.0f,		0.993150651f, 0.0f, 0.116841137f,	1.0, 1.0,
		1.0f, 0.0f, 0.0f,		0.993150651f, 0.0f, 0.116841137f,	1.0, 0.0
	};

	glm::vec3 normal;

	normal = CalculateTriangleNormal(glm::vec3(.98f, 1.0f, 0.17f), glm::vec3(.98f, 0.0f, 0.17f), glm::vec3(1.0f, 0.0f, 0.0f));

	// store vertex and index count
	m_CylinderMesh.nVertices = sizeof(verts) / (sizeof(verts[0]) * (g_FloatsPerVertex + g_FloatsPerNormal + g_FloatsPerUV));
	m_CylinderMesh.nIndices = 0;

	// Create VAO
	glGenVertexArrays(1, &m_CylinderMesh.vao); // we can also generate multiple VAOs or buffers at the same time
	glBindVertexArray(m_CylinderMesh.vao);

	// Create VBO
	glGenBuffers(1, m_CylinderMesh.vbos);
	glBindBuffer(GL_ARRAY_BUFFER, m_CylinderMesh.vbos[0]); // Activates the buffer
	glBufferData(GL_ARRAY_BUFFER, sizeof(verts), verts, GL_STATIC_DRAW); // Sends vertex or coordinate data to the GPU

	if (m_bMemoryLayoutDone == false)
	{
		SetShaderMemoryLayout();
	}
}

///////////////////////////////////////////////////
//	DrawHalfCylinderMesh()
//
//	Transform and draw the mesh to the window.
// 
///////////////////////////////////////////////////
void HalfCylinder::DrawHalfCylinderMesh(
	bool bDrawTop,
	bool bDrawBottom,
	bool bDrawSides)
{
	glBindVertexArray(m_CylinderMesh.vao);

	if (bDrawBottom == true)
	{
		glDrawArrays(GL_TRIANGLE_FAN, 0, 36);	//bottom
	}
	if (bDrawTop == true)
	{
		glDrawArrays(GL_TRIANGLE_FAN, 36, 36);	//top
	}
	if (bDrawSides == true)
	{
		glDrawArrays(GL_TRIANGLE_STRIP, 72, 72);	//sides
	}

	glBindVertexArray(0);
}

glm::vec3 HalfCylinder::CalculateTriangleNormal(glm::vec3 p0, glm::vec3 p1, glm::vec3 p2)
{
	glm::vec3 Normal(0, 0, 0);
	float v1x = p1.x - p0.x;
	float v1y = p1.y - p0.y;
	float v1z = p1.z - p0.z;
	float v2x = p2.x - p1.x;
	float v2y = p2.y - p1.y;
	float v2z = p2.z - p1.z;
	Normal.x = v1y * v2z - v1z * v2y;
	Normal.y = v1z * v2x - v1x * v2z;
	Normal.y = v1x * v2y - v1y * v2x;
	float len = (float)sqrt(Normal.x * Normal.x + Normal.y * Normal.y + Normal.z * Normal.z);
	if (len == 0)
	{
		//throw Exception();
	}
	else
	{
		Normal.x /= len;
		Normal.y /= len;
		Normal.z /= len;
	}
	return Normal;
}



void HalfCylinder::SetShaderMemoryLayout()
{
	// The following code defines the layout of the mesh data in memory - each mesh needs
	// to have the same memory layout so that the data is retrieved properly by the shaders

	// Strides between vertex coordinates is 6 (x, y, z, r, g, b, a). A tightly packed stride is 0.
	GLint stride = sizeof(float) * (g_FloatsPerVertex + g_FloatsPerNormal + g_FloatsPerUV);// The number of floats before each

	// Create Vertex Attribute Pointers
	glVertexAttribPointer(0, g_FloatsPerVertex, GL_FLOAT, GL_FALSE, stride, 0);
	glEnableVertexAttribArray(0);

	glVertexAttribPointer(1, g_FloatsPerNormal, GL_FLOAT, GL_FALSE, stride, (void*)(sizeof(float) * g_FloatsPerVertex));
	glEnableVertexAttribArray(1);

	glVertexAttribPointer(2, g_FloatsPerUV, GL_FLOAT, GL_FALSE, stride, (void*)(sizeof(float) * (g_FloatsPerVertex + g_FloatsPerNormal)));
	glEnableVertexAttribArray(2);
}